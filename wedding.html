<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Happy Marriage</title>
  <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&display=swap" rel="stylesheet" />
  <style>
    body {
      background: url('background.jpg') no-repeat center center fixed;
      background-size: cover;
      font-family: 'ZCOOL KuaiLe', cursive;
      margin: 0;
      padding: 2rem;
      color: #fadadd;
    }
    h1 {
      font-family: 'Great Vibes', cursive;
      color: #bb2649;
      font-size: 3.2rem;
      margin-bottom: 2rem;
      text-align: center;
      line-height: 1.4;
      text-shadow: 1px 1px 3px white;
    }
    .grid {
      display: grid;
      grid-template-columns: repeat(7, 120px);
      grid-template-rows: repeat(6, 120px);
      gap: 4px;
      width: max-content;
      margin: 0 auto;
    }
    .grid div {
      width: 120px;
      height: 120px;
    }
    .photo {
      background-size: cover;
      background-position: center;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
      border-radius: 16px;
    }
    .message p {
      font-family: "å¾®è½¯é›…é»‘", "Microsoft YaHei", sans-serif;
      font-size: 1.2rem;
      text-align: left;
      line-height: 1.6;
      margin-top: 2rem;
    }
    .overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: rgba(0,0,0,0.4);
      z-index: 0;
    }
    body > *:not(.overlay) {
      position: relative;
      z-index: 1;
    }
    #countdown-screen {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: black;
      color: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 6rem;
      font-weight: bold;
      z-index: 9999;
    }
    #countdown-text {
      animation: scaleUp 1s ease-in-out infinite;
    }
    @keyframes scaleUp {
      0% { transform: scale(1); opacity: 1; }
      100% { transform: scale(1.5); opacity: 0; }
    }
    #celebration-screen {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: black;
      z-index: 9998;
      overflow: hidden;
      display: none;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
    .celebration-text {
      position: absolute;
      top: 20%;
      font-size: 6rem;
      color: #ed1c24; /*c21807*/
      text-shadow: 2px 2px 5px black;
      z-index: 2;
      font-family: 'Great Vibes', cursive;
    }
    #fireworks-canvas {
      position: absolute;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      pointer-events: none;
      z-index: 1;
    }
    #main-content {
      display: none;
    }
  </style>
</head>
<body>

  <!-- ğŸµ èƒŒæ™¯éŸ³ä¹æ’­æ”¾æŒ‰é’® -->
  <button id="play-music" style="margin-bottom: 1rem; font-size: 1rem;">
    ç‚¹å‡»æ’­æ”¾èƒŒæ™¯éŸ³ä¹ ğŸµ
  </button>

  <div class="overlay"></div>

  <div id="countdown-screen">
    <div id="countdown-text">3</div>
  </div>

  <div id="celebration-screen">
    <canvas id="fireworks-canvas"></canvas>
    <h1 class="celebration-text">Happy Marriage!</h1>
    <!-- ç¥ç¦è¯­éŸ³ï¼Œè‡ªåŠ¨æ’­æ”¾ -->
    <audio id="blessing-voice" src="blessing.m4a" preload="auto"></audio>
  </div>

  <div id="main-content">
    <h1>Erica & Dana<br>Together since 2015 â€” Forever beyond 2025</h1>

    <div class="grid" id="heart-grid"></div>

    <div class="message">
      <p>
        <!-- ä½ çš„ç¥ç¦æ–‡å­—å†…å®¹ -->
        æˆ‘æœ€çˆ±çš„å¡ï¼š<br><br>
        è¿˜è®°å¾—é«˜ä¸­çš„æ—¶å€™ï¼Œæœ‰ä¸€å¹´æˆ‘çš„ç”Ÿæ—¥ï¼Œä½ é€äº†æˆ‘ä¸€æŠŠå¾ˆå¤§çš„é“¶è‰²è§å…‰ä¼ï¼Œæ—¢ç»“å®åˆæ¼‚äº®ã€‚è´ºå¡ä¸Šå†™ç€ï¼šå¸Œæœ›æœ‰ä¸€å¤©æœ‰äººèƒ½å¤Ÿæ›¿æˆ‘é®é£æŒ¡é›¨ã€‚å¦‚ä»Šï¼Œé‚£ä¸ªèƒ½ä¸ºä½ é®é£æŒ¡é›¨çš„äººï¼Œç»ˆäºè¦ä¸ä½ æºæ‰‹è¸ä¸Šäººç”Ÿåˆä¸€æ®µå´­æ–°çš„æ—…ç¨‹äº†ï¼Œæˆ‘ç”±è¡·åœ°ä¸ºä½ æ„Ÿåˆ°é«˜å…´ã€‚<br><br>
å©šå§»è¿™æ¡è·¯ï¼Œè¯´é•¿ä¸é•¿ï¼Œè¯´çŸ­ä¸çŸ­ã€‚çœŸæ­£é‡è¦çš„ï¼Œä¸æ˜¯èµ°äº†å¤šä¹…ï¼Œè€Œæ˜¯ä¸€è·¯ä¸Šä½ ä»¬å¦‚ä½•äº’ç›¸å…³å¿ƒã€å½¼æ­¤ç†è§£ã€‚æˆ‘ç›¸ä¿¡ï¼Œä½ ä»¬ä¼šæ°¸è¿œè®°å¾—è¿™ä»½åˆè¡·ï¼Œåœ¨æ—¥å¤ä¸€æ—¥çš„çç¢ç”Ÿæ´»é‡Œä¹Ÿä¾æ—§å®ˆç€é‚£ä»½æœ€åˆçš„å–œæ¬¢ã€‚<br><br>
å©šç¤¼çš„æ„ä¹‰ï¼Œä¹Ÿè®¸ä¸åœ¨äºç™½çº±ä¸é²œèŠ±ï¼Œè€Œåœ¨äºä»è¿™ä¸€å¤©èµ·ï¼Œä½ ä»¬çœŸæ­£æˆä¸ºå½¼æ­¤ç”Ÿå‘½ä¸­æœ€é‡è¦çš„äººã€‚ä»ä»Šå¾€åï¼Œä¸è®ºé£é›¨ï¼Œäº¦æˆ–æ™´å¤©ï¼Œæˆ‘ç›¸ä¿¡ï¼Œä½ ä»¬ä¸€å®šä¼šæˆä¸ºå½¼æ­¤æ¸©æš–è€Œåšå®šçš„ä¾é ã€‚ç­‰åˆ°ä½ ä»¬ç™½å‘è‹è‹ï¼Œååœ¨æ‘‡æ¤…ä¸Šå›æœ›ä»Šå¤©ï¼Œä¸€å®šä¼šå›å¿†èµ·ï¼Œè¿™ä»½è‡³çº¯ä¹‹æƒ…çš„çè´µã€‚<br><br>
æœ€ç¾å¥½çš„ç¼˜åˆ†ï¼Œä¸åªæ˜¯ä½ ä»¬é‡è§äº†å½¼æ­¤ï¼Œæ›´æ˜¯æˆ‘ä»¬ä¹Ÿèƒ½å‚ä¸å¹¶è§è¯è¿™æ®µçœŸæŒšåŠ¨äººçš„æ—…ç¨‹ã€‚æˆ‘ä»¬ä¸€èµ·ç»å†äº†é‚£ä¹ˆå¤šç¾å¥½çš„æ—¶å…‰ï¼Œç©é—¹ã€æ¬¢ç¬‘ã€å½¼æ­¤æ”¯æŒä¸é™ªä¼´ã€‚åå¹´å‰çš„ä»Šå¤©ï¼Œæˆ‘ä»¬æˆ–è®¸ä»æœªæƒ³è¿‡ä¼šèµ°åˆ°ç°åœ¨ï¼Œæ›´æ²¡æƒ³åˆ°å½¼æ­¤èƒ½ä¸€è·¯é™ªä¼´è‡³ä»Šï¼Œå…±åŒè¿æ¥è¿™äººç”Ÿçš„æ–°ç¯‡ç« ã€‚ä½ ä»¬ç›¸çˆ±çš„æ—¶é—´ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬å½¼æ­¤ç›¸è¯†ã€ç›¸å®ˆçš„æ—¶é—´ã€‚å¯¹æˆ‘æ¥è¯´ï¼Œæœ€å¤§çš„å¹¸è¿ï¼Œå°±æ˜¯èƒ½å¤Ÿé™ªä¼´ä½ ä»¬ä»é’æ˜¥èµ°å‘æˆç†Ÿï¼Œä»æ‹çˆ±èµ°è¿›å©šå§»ã€‚æ„¿ä½ ä»¬çš„æ–°ç”Ÿæ´»ï¼Œç»§ç»­ä¹¦å†™ç»†æ°´é•¿æµçš„æ•…äº‹ï¼›è€Œæˆ‘ä»¬ï¼Œä¹Ÿå§‹ç»ˆä¼šæ˜¯è¿™äº›æ•…äº‹æœ€å¿ å®çš„è¯»è€…å’Œå®ˆå€™è€…ã€‚<br><br>
æ„¿çˆ±æƒ…æ’ä¹…ç”œèœœï¼Œæ„¿å‰è·¯æ¸©æš–æ˜äº®ï¼›å²æœˆé™å¥½ï¼Œé£æ™¯å¸¸æ–°ï¼Œå¹¸ç¦ä¸æ­¢äºæ­¤åˆ»ã€‚<br><br>
è¡·å¿ƒç¥ä½ ä»¬æ–°å©šå¿«ä¹ï¼Œæ„¿å¾€åçš„æ¯ä¸€å¤©ï¼Œéƒ½æ¯”æ˜¨å¤©æ›´å¹¸ç¦ä¸€ç‚¹ã€‚<br><br>
â€”â€”æœ€çˆ±ä½ çš„Ally<br><br>
äºŒé›¶äºŒäº”å¹´äº”æœˆåä¸ƒæ—¥ç•™å¿µ
      </p>
    </div>
  </div>

  <!-- èƒŒæ™¯éŸ³ä¹ï¼Œåˆå§‹ä¸æ’­æ”¾ï¼Œç”±æŒ‰é’®æ§åˆ¶ -->
  <audio id="background-music" src="music.mp3" preload="auto" loop></audio>

<script>
  // å¿ƒå½¢ç…§ç‰‡æ‹¼æ¥
  const heartShape = [
    "0100010",
    "1110111",
    "1111111",
    "0111110",
    "0011100",
    "0001000"
  ];
  const container = document.getElementById('heart-grid');
  let photoIndex = 1;
  const maxPhotos = 100;
  for (let row = 0; row < heartShape.length; row++) {
    for (let col = 0; col < heartShape[row].length; col++) {
      const cell = document.createElement('div');
      if (heartShape[row][col] === '1' && photoIndex <= maxPhotos) {
        cell.classList.add('photo');
        cell.style.backgroundImage = `url('photo${photoIndex}.jpg')`;
        photoIndex++;
      }
      container.appendChild(cell);
    }
  }

  const countdownScreen = document.getElementById('countdown-screen');
  const countdownText = document.getElementById('countdown-text');
  const celebrationScreen = document.getElementById('celebration-screen');
  const blessingVoice = document.getElementById('blessing-voice');
  const mainContent = document.getElementById('main-content');
  const playMusicBtn = document.getElementById('play-music');
  const backgroundMusic = document.getElementById('background-music');

  let count = 3;

  // è®¡æ—¶å™¨å€’æ•°
  const countdownInterval = setInterval(() => {
    count--;
    if (count > 0) {
      countdownText.textContent = count;
    } else {
      clearInterval(countdownInterval);
      countdownScreen.style.display = 'none';
      celebrationScreen.style.display = 'flex';

      // è‡ªåŠ¨æ’­æ”¾ç¥ç¦è¯­éŸ³ï¼ˆå¯èƒ½è¢«æµè§ˆå™¨é˜»æ­¢ï¼‰
      playBlessing();

      launchFireworks();
    }
  }, 1000);

  // æ’­æ”¾ç¥ç¦è¯­éŸ³å‡½æ•°ï¼Œå«è‡ªåŠ¨æ’­æ”¾å¤±è´¥å¤„ç†
  function playBlessing() {
    blessingVoice.play().catch(() => {
      alert('è¯·ç‚¹å‡»é¡µé¢ä»¥æ’­æ”¾ç¥ç¦è¯­éŸ³');
    });
  }

  // ç¥ç¦è¯­éŸ³æ’­æ”¾ç»“æŸï¼Œåˆ‡æ¢åˆ°ä¸»å†…å®¹
  blessingVoice.addEventListener('ended', () => {
    celebrationScreen.style.display = 'none';
    mainContent.style.display = 'block';
  });

  // èƒŒæ™¯éŸ³ä¹æ’­æ”¾æŒ‰é’®äº‹ä»¶
  playMusicBtn.addEventListener('click', () => {
    // é¿å…ç¥ç¦è¯­éŸ³å’ŒèƒŒæ™¯éŸ³ä¹é‡å æ’­æ”¾
    if (!backgroundMusic.paused) {
      backgroundMusic.pause();
      playMusicBtn.textContent = 'ç‚¹å‡»æ’­æ”¾èƒŒæ™¯éŸ³ä¹ ğŸµ';
    } else {
      blessingVoice.pause();
      backgroundMusic.play();
      playMusicBtn.textContent = 'ç‚¹å‡»æš‚åœèƒŒæ™¯éŸ³ä¹ â¸ï¸';
    }
  });

  // çƒŸèŠ±åŠ¨ç”»
  function launchFireworks() {
    const canvas = document.getElementById('fireworks-canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    const particles = [];

    function randomColor() {
      return `hsl(${Math.random() * 360}, 100%, 70%)`;
    }

    for (let i = 0; i < 100; i++) {
      particles.push({
        x: canvas.width / 2,
        y: canvas.height / 2,
        angle: Math.random() * 2 * Math.PI,
        speed: Math.random() * 5 + 2,
        radius: Math.random() * 2 + 1,
        color: randomColor(),
        alpha: 1
      });
    }

    function animate() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      particles.forEach(p => {
        const dx = Math.cos(p.angle) * p.speed;
        const dy = Math.sin(p.angle) * p.speed;
        p.x += dx;
        p.y += dy;
        p.alpha -= 0.015;
        if (p.alpha < 0) p.alpha = 0;

        ctx.beginPath();
        ctx.arc(p.x, p.y, p.radius, 0, 2 * Math.PI);
        // è¿™é‡Œ p.color æ˜¯å­—ç¬¦ä¸²å½¢å¼ hsl(x,100%,70%)
        // æå–è‰²è°ƒæ•°å­—
        const hueMatch = p.color.match(/\d+\.?\d*/);
        const hue = hueMatch ? hueMatch[0] : 0;
        ctx.fillStyle = `hsla(${hue}, 100%, 70%, ${p.alpha})`;
        ctx.fill();
      });

      if (particles.some(p => p.alpha > 0)) {
        requestAnimationFrame(animate);
      }
    }
    animate();
  }

  // ç‚¹å‡»é¡µé¢ä¹Ÿå¯å°è¯•æ’­æ”¾ç¥ç¦è¯­éŸ³ï¼ˆé˜²æ­¢è‡ªåŠ¨æ’­æ”¾è¢«é˜»æ­¢ï¼‰
  document.body.addEventListener('click', () => {
    if (celebrationScreen.style.display === 'flex' && blessingVoice.paused) {
      blessingVoice.play();
    }
  });
</script>

</body>
</html>
